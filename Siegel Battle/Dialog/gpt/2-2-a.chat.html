<html>
  <head>
    <title>ChatGPT Data Export</title>
    <style>
      body {
        margin: 20px;
      }
      h4 {
        font-family: sans-serif;
        margin: 0;
      }
      #root {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      .conversation {
        border: 1px solid black;
        padding: 20px;
        background-color: #f3f3f3;
      }
      .message {
        white-space: pre-wrap;
        margin: 20px 0;
      }
      .author {
        font-weight: bold;
        margin-bottom: 4px;
      }
      .author::first-letter {
        text-transform: uppercase;
      }
    </style>
    <script>
      var jsonData = [{"title": "\u6b7b\u9748\u6cd5\u5e2b\u7684\u9818\u5730", "create_time": 1688658866.249731, "update_time": 1688658916.0, "mapping": {"872afd7c-3a81-488d-a8ae-ff77bd7436ee": {"id": "872afd7c-3a81-488d-a8ae-ff77bd7436ee", "message": {"id": "872afd7c-3a81-488d-a8ae-ff77bd7436ee", "author": {"role": "system", "name": null, "metadata": {}}, "create_time": 1688658866.250109, "update_time": null, "content": {"content_type": "text", "parts": [""]}, "status": "finished_successfully", "end_turn": true, "weight": 1.0, "metadata": {}, "recipient": "all"}, "parent": "aaa15b38-7dca-40a6-a765-084a10361887", "children": ["aaa2af14-1db0-4e47-ad79-673344a75790"]}, "aaa15b38-7dca-40a6-a765-084a10361887": {"id": "aaa15b38-7dca-40a6-a765-084a10361887", "message": null, "parent": null, "children": ["872afd7c-3a81-488d-a8ae-ff77bd7436ee"]}, "aaa2af14-1db0-4e47-ad79-673344a75790": {"id": "aaa2af14-1db0-4e47-ad79-673344a75790", "message": {"id": "aaa2af14-1db0-4e47-ad79-673344a75790", "author": {"role": "user", "name": null, "metadata": {}}, "create_time": 1688658866.25119, "update_time": null, "content": {"content_type": "text", "parts": ["image: region of many necromancer, Marsh gas, lots of bones and corpse\n\n\u4ee5\u4e0a\u662f\u5c0f\u8aaa\u7684\u9644\u5716\n\u5e6b\u6211\u5beb\u4e00\u6bb5\u6b7b\u9748\u6cd5\u5e2b\u7684\u9818\u5730  \n\u8def\u4e0a\u7d93\u904e\u4e4b\u8655\u4f3c\u4e4e\u8a31\u591a\u6cbc\u6c23\n\u7030\u6f2b\u8457\u81ed\u5473\n\u9700\u8981\u4f7f\u7528\u98a8\u7cbe\u9748\u7684\u9b54\u6cd5\u505a\u9694\u96e2\n\u4f46\u6709\u6642\u5019\u9084\u662f\u6703\u4e0d\u5c0f\u5fc3\u78b0\u5230\u5c4d\u6bd2 \u6703\u9700\u8981\u4f7f\u7528\u8056\u6c34\u6d88\u6bd2\n\n\u5c0f\u5fc3\u7ffc\u7ffc\u7684\u524d\u884c\n\u4e00\u8def\u4e0a\u9670\u68ee \u771f\u7684\u6709\u4eba\u4f4f\u5728\u9019\u88e1\u55ce?\n\u8c8c\u4f3c\u6703\u7a81\u7136\u51fa\u73fe\u9b3c\u9b42?\n\n\u8981\u5728\u9019\u88e1\u627e\u5230\u5091\u5361\u2027\u840a\u4f0a \u624d\u80fd\u77e5\u9053\u7d50\u754c\u70ba\u751a\u9ebc\u4e0d\u7a69"]}, "status": "finished_successfully", "end_turn": null, "weight": 1.0, "metadata": {"timestamp_": "absolute", "message_type": null}, "recipient": "all"}, "parent": "872afd7c-3a81-488d-a8ae-ff77bd7436ee", "children": ["c8e2c50e-0a04-4427-9be9-b1cdc4c205ab"]}, "c8e2c50e-0a04-4427-9be9-b1cdc4c205ab": {"id": "c8e2c50e-0a04-4427-9be9-b1cdc4c205ab", "message": {"id": "c8e2c50e-0a04-4427-9be9-b1cdc4c205ab", "author": {"role": "assistant", "name": null, "metadata": {}}, "create_time": 1688658915.798444, "update_time": null, "content": {"content_type": "text", "parts": ["\u75be\u98a8\u5982\u6028\u9b3c\u7684\u547c\u562f\uff0c\u9a5a\u64fe\u8457\u6b7b\u9748\u6cd5\u5e2b\u9818\u5730\u7684\u5be7\u975c\u3002\u9019\u88e1\u662f\u60b2\u50b7\u7684\u6a02\u7ae0\uff0c\u5145\u65a5\u8457\u6cbc\u6c23\u8207\u5c4d\u6bd2\u7684\u60b2\u6b4c\u3002\u9ab8\u9aa8\u6563\u843d\u5982\u540c\u6230\u5834\u4e0a\u7684\u907a\u68c4\u7269\uff0c\u4e0d\u518d\u662f\u6709\u751f\u547d\u7684\u8c61\u5fb5\uff0c\u800c\u662f\u6b98\u9177\u8207\u6b7b\u4ea1\u7684\u8a18\u8650\u3002\n\n\u9019\u88e1\uff0c\u662f\u4e00\u500b\u6b7b\u9748\u6cd5\u5e2b\u7684\u9818\u5730\uff0c\u4e26\u975e\u5e38\u4eba\u6240\u80fd\u8f15\u6613\u9032\u5165\u3002\u6b7b\u9748\u6cd5\u5e2b\u7684\u5bae\u6bbf\u5efa\u7bc9\u5728\u8352\u6dbc\u6cbc\u6fa4\u4e4b\u4e2d\uff0c\u56db\u5468\u7c60\u7f69\u5728\u539a\u539a\u7684\u6cbc\u6c23\u4e4b\u4e0b\u3002\u90a3\u9663\u9663\u7634\u6c23\u5982\u540c\u4ee4\u4eba\u7a92\u606f\u7684\u60e1\u5922\uff0c\u96e3\u4ee5\u9003\u812b\u3002\n\n\u552f\u4e00\u7684\u61c9\u5c0d\u4e4b\u9053\uff0c\u5c31\u662f\u501f\u52a9\u98a8\u7cbe\u9748\u7684\u529b\u91cf\uff0c\u5c07\u9019\u4e9b\u7634\u6c23\u9694\u7d55\u3002\u7136\u800c\u5373\u4f7f\u5982\u6b64\uff0c\u5076\u723e\u9084\u662f\u6703\u906d\u9047\u4e00\u4e9b\u96e3\u4ee5\u62b5\u64cb\u7684\u5c4d\u6bd2\u3002\u6bcf\u7576\u9019\u7a2e\u6642\u523b\uff0c\u5c31\u9700\u8981\u7528\u5230\u90a3\u5bf6\u8cb4\u7684\u8056\u6c34\u9032\u884c\u6de8\u5316\u3002\n\n\u6cbc\u6fa4\u88e1\uff0c\u5f77\u5f7f\u662f\u4ea1\u8005\u7684\u72c2\u821e\uff0c\u5e7d\u9748\u822c\u7684\u5b58\u5728\u4e0d\u5b9a\u6642\u7684\u51fa\u73fe\uff0c\u8b93\u4eba\u5fc3\u751f\u6050\u61fc\u3002\u552f\u4e00\u8b93\u4eba\u611f\u5230\u5947\u602a\u7684\u662f\uff0c\u9019\u6a23\u7684\u5730\u65b9\uff0c\u771f\u7684\u6703\u6709\u4eba\u9078\u64c7\u5c45\u4f4f\u55ce\uff1f\n\n\u4e00\u8def\u4e0a\u7684\u6050\u61fc\u8207\u9670\u68ee\uff0c\u53ea\u70ba\u4e86\u627e\u5230\u90a3\u500b\u53eb\u505a\u5091\u5361\u2027\u840a\u4f0a\u7684\u4eba\u3002\u4ed6\uff0c\u662f\u9019\u7247\u571f\u5730\u4e0a\u7684\u4e3b\u4eba\uff0c\u53ea\u6709\u627e\u5230\u4ed6\uff0c\u624d\u80fd\u77e5\u9053\u7d50\u754c\u70ba\u4f55\u5982\u6b64\u4e0d\u7a69\u5b9a\uff0c\u4e26\u4e14\u5c0b\u6c42\u89e3\u6c7a\u4e4b\u9053\u3002\n\n\u5728\u6b7b\u9748\u6cd5\u5e2b\u7684\u9818\u5730\u4e0a\uff0c\u6bcf\u4e00\u6b65\u90fd\u5145\u6eff\u4e86\u6311\u6230\u8207\u9a5a\u99ed\u3002\u7136\u800c\uff0c\u70ba\u4e86\u62ef\u6551\u9019\u500b\u4e16\u754c\uff0c\u5fc5\u9808\u8981\u6709\u4eba\u53bb\u9762\u5c0d\u9019\u4e00\u5207\u3002\u5c0d\u65bc\u5373\u5c07\u8e0f\u4e0a\u9019\u7247\u9818\u5730\u7684\u5192\u96aa\u8005\u4f86\u8aaa\uff0c\u524d\u65b9\u7684\u8def\uff0c\u5373\u662f\u5371\u96aa\uff0c\u4e5f\u662f\u5e0c\u671b\u3002"]}, "status": "finished_successfully", "end_turn": true, "weight": 1.0, "metadata": {"message_type": null, "model_slug": "gpt-4", "finish_details": {"type": "stop", "stop": "&lt;|diff_marker|&gt;"}, "is_complete": true, "timestamp_": "absolute"}, "recipient": "all"}, "parent": "aaa2af14-1db0-4e47-ad79-673344a75790", "children": []}}, "moderation_results": [], "current_node": "c8e2c50e-0a04-4427-9be9-b1cdc4c205ab", "plugin_ids": null, "id": "cd9d64a5-f5ec-49cd-8c3d-1b7234d9d457"}]

      function getConversationMessages(conversation) {
          var messages = [];
          var currentNode = conversation.current_node;
          while (currentNode != null) {
              var node = conversation.mapping[currentNode];
              if (
                  node.message &&
                  node.message.content &&
                  node.message.content.content_type == "text"
                  && node.message.content.parts.length > 0 &&
                  node.message.content.parts[0].length > 0 &&
                  (node.message.author.role !== "system"  || node.message.metadata.is_user_system_message)
              ) {
                  author = node.message.author.role;
                  if (author === "assistant") {
                      author = "ChatGPT";
                  } else if (author === "system" && node.message.metadata.is_user_system_message) {
                      author = "Custom user info"
                  }
                  messages.push({ author, text: node.message.content.parts[0] });
              }
              currentNode = node.parent;
          }
          return messages.reverse();
      }

      // on load, add messages to the root div
      window.onload = function() {
          var root = document.getElementById("root");
          for (var i = 0; i < jsonData.length; i++) {
              var conversation = jsonData[i];
              var messages = getConversationMessages(conversation);
              var div = document.createElement("div");
              div.className = "conversation";
              div.innerHTML = "<h4>" + conversation.title + "</h4>";
              for (var j = 0; j < messages.length; j++) {
                  var message = document.createElement("pre");
                  message.className = "message";
                  message.innerHTML = `<div class="author">${messages[j].author}</div><div>${messages[j].text}</div>`;
                  div.appendChild(message);
              }
              root.appendChild(div);
          }
      }
    </script>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>